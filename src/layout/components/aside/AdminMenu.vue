<template>
  <div class="nav-menu" :style="{ width: isCollapse ? '64px' : '250px' }">
    <!-- <span class="menu-logo">OAã€€|ã€€é¼æ³°é«˜ç§‘ååŒåŠå…¬ </span> -->
    <el-menu :collapse="isCollapse" :collapse-transition="false" unique-opened :router="true"
      :default-active="activeIndex">
      <el-scrollbar>
        <el-collapse @change="handleChange">
          <el-collapse-item title="é‡‡è´­ååŒ" name="1">
            <menu-item></menu-item>
          </el-collapse-item>
          <el-collapse-item title="é”€å”®ååŒ" name="2">
            <menu-item></menu-item>
          </el-collapse-item>
          <el-collapse-item title="é…ç½®ç®¡ç†" name="3">
            <menu-item></menu-item>
          </el-collapse-item>
        </el-collapse>
      </el-scrollbar>
    </el-menu>
  </div>
</template>

<script setup>
import { computed, ref } from 'vue'
import MenuItem from './MenuItem.vue';
import { useCollapseStore } from '@/stores/collapse';
import { storeToRefs } from 'pinia'
import { useRoute } from 'vue-router';

const route = useRoute()
const activeIndex = ref(route.path)
/**
 * è·å–store
 */
const store = useCollapseStore();
/**
 * è·å–collapse
 */
const isCollapse = computed(() => {
  return store.getCollapse;
})

const handleChange = (e) => {
  console.log("ğŸš€ ~ file: AdminMenu.vue ~ line 50 ~ handleChange ~ e", e)
}

</script>

<style lang="scss" scoped>
.el-menu-vertical-demo:not(.el-menu--collapse) {
  width: 200px;
  min-height: 400px;
}

.nav-menu {
  height: 100%;

  .el-menu {
    height: 100%;
    text-align: center;
    overflow: hidden;
    border: 0;

    .menu-logo {
      display: inline-block;
      height: 25px;
      line-height: 25px;
    }

    .el-collapse-item__header {
      text-align: center;
      font-size: 99px;
      white-space: nowrap;
    }
  }
}
</style>
